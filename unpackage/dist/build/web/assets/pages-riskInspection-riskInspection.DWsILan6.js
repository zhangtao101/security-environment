import{r as e,q as a,C as s,D as t,l,a as o,b as r,A as n,h as i,o as c,e as u,y as d,z as p,F as m,j as f,t as g,n as _,B as k}from"./index-BP_ofNMV.js";import{_ as h}from"./wd-tag.CNGAPaiu.js";import{_ as w,l as y,n as v,r as j,p as x}from"./useChildren.CAjn426h.js";import{_ as C}from"./wd-cell.RGUuOR8c.js";import{_ as z}from"./wd-cell-group.QEUQO_Od.js";import{_ as D}from"./wd-message-box.BqT4QVFO.js";import{_ as b}from"./wd-toast.CNyXT4Ng.js";import{r as E,c as I}from"./request.D2K8nqXq.js";const A=w({__name:"riskInspection",setup(w){const A=e([]);function F(){Promise.all([E({url:`/${I.mesMain}/riskcheck/execution/taskList`,data:{area:"",pageNum:1,pageSize:9999},needAuth:!0,method:"GET"}),E({url:`/${I.mesMain}/riskcheck/execution/taskListEd`,data:{area:"",pageNum:1,pageSize:9999},needAuth:!0,method:"GET"})]).then((([e,a])=>{A.value=[...e.list,...a.list],console.log(A.value)})).finally((()=>{n()}))}const O=e(1);return a((()=>{F();s().proxy.getOpenerEventChannel().on("acceptDataFromOpenerPage",(function(e){O.value=e.type,t({title:2===O.value?"风险上报任务":"巡检任务"})}))})),y((()=>{F()})),v((()=>{F()})),(e,a)=>{const s=i,t=j(l("wd-tag"),h),n=j(l("wd-icon"),x),w=j(l("wd-cell"),C),y=j(l("wd-cell-group"),z),v=j(l("wd-message-box"),D),E=j(l("wd-toast"),b);return c(),o(s,{style:{"margin-top":"1em"}},{default:r((()=>[u(y,null,{default:r((()=>[(c(!0),d(m,null,p(A.value,((e,a)=>(c(),o(w,{key:a,center:""},{title:r((()=>[u(s,null,{default:r((()=>[u(s,null,{default:r((()=>[f(g(e.area),1)])),_:2},1024),u(s,{style:{display:"inline-block",color:"#7f7f7f","font-size":"15rpx"}},{default:r((()=>[f(g(e.riskCode)+" ",1),u(t,{"custom-class":"space",type:"primary"},{default:r((()=>[f(g(e.checkType),1)])),_:2},1024)])),_:2},1024),u(s,{class:_(["status",e.state?"success":"notStarted"])},{default:r((()=>[f(g(e.state?"已完成":"未开始"),1)])),_:2},1032,["class"])])),_:2},1024)])),default:r((()=>[u(n,{name:"arrow-right",size:"22px",onClick:a=>{return s=e,void k({url:"/pages/riskInspectionDetails/riskInspectionDetails",success(e){e.eventChannel.emit("acceptDataFromOpenerPage",{id:s.id})}});var s}},null,8,["onClick"])])),_:2},1024)))),128))])),_:1}),u(v),u(E)])),_:1})}}},[["__scopeId","data-v-7cf9de26"]]);export{A as default};
