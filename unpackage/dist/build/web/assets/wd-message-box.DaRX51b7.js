import{i as e,r as t,p as o,d as s,c as a,k as n,w as l,o as r,a as u,b as i,e as c,n as p,j as d,t as m,x as f,y as _,u as w,F as h,f as y,a4 as x,h as b}from"./index-Cztqg-WN.js";import{u as C,a as B,b as E,_ as P}from"./request.C0iyF09t.js";import{d as g,g as V,m as k,b as z,e as v,t as T,h as O,v as S,w as I,_ as M}from"./useChildren.DGM8SC5-.js";const $=Symbol("None"),N={title:"",showCancelButton:!1,show:!1,closeOnClickModal:!0,msg:"",type:"alert",inputType:"text",inputValue:"",showErr:!1,zIndex:99,lazyRender:!0,inputError:""};function G(s=""){const a=s?"__MESSAGE_OPTION__"+s:"__MESSAGE_OPTION__",n=e(a,t($));n.value===$&&(n.value=N,o(a,n));const l=e=>t=>{const o=g({type:e},"string"==typeof t?{title:t}:t);return"confirm"===o.type||"prompt"===o.type?o.showCancelButton=!0:o.showCancelButton=!1,r(o)},r=e=>new Promise(((t,o)=>{const s=g(N,"string"==typeof e?{title:e}:e);n.value=g(s,{show:!0,success:e=>{p(),t(e)},fail:e=>{p(),o(e)}})})),u=l("alert"),i=l("confirm"),c=l("prompt"),p=()=>{n.value!==$&&(n.value.show=!1)};return{show:r,alert:u,confirm:i,prompt:c,close:p}}const R=M(s({name:"wd-message-box",options:{virtualHost:!0,addGlobalClass:!0,styleIsolation:"shared"},props:{...V,selector:k(""),rootPortal:z(!1)},setup(o){const s=o,{translate:g}=C("message-box"),V=a((()=>`wd-message-box__container ${s.customClass}`)),k=a((()=>`wd-message-box__body ${G.title?"":"is-no-title"} ${"prompt"===G.type?"is-prompt":""}`)),z=(M=s.selector)?`__MESSAGE_OPTION__${M}`:"__MESSAGE_OPTION__";var M;const $=e(z,t(N)),G=n({msg:"",show:!1,title:"",showCancelButton:!1,closeOnClickModal:!0,confirmButtonText:"",cancelButtonText:"",type:"alert",inputType:"text",inputValue:"",inputPlaceholder:"",inputError:"",showErr:!1,zIndex:99,lazyRender:!0}),R=a((()=>{const e=T({block:!0},O(G.confirmButtonProps)?S(G.confirmButtonProps,I):{});return e.customClass=`${e.customClass||""} wd-message-box__actions-btn`,e})),j=a((()=>{const e=T({block:!0,type:"info"},O(G.cancelButtonProps)?S(G.cancelButtonProps,I):{});return e.customClass=`${e.customClass||""} wd-message-box__actions-btn`,e}));function A(e){if(("modal"!==e||G.closeOnClickModal)&&("prompt"!==G.type||"confirm"!==e||function(){if(G.inputPattern&&!G.inputPattern.test(String(G.inputValue)))return G.showErr=!0,!1;if("function"==typeof G.inputValidate){if(!G.inputValidate(G.inputValue))return G.showErr=!0,!1}return G.showErr=!1,!0}()))switch(e){case"confirm":G.beforeConfirm?G.beforeConfirm({resolve:t=>{t&&U({action:e,value:G.inputValue})}}):U({action:e,value:G.inputValue});break;case"cancel":q({action:e});break;default:q({action:"modal"})}}function U(e){G.show=!1,v(G.success)&&G.success(e)}function q(e){G.show=!1,v(G.fail)&&G.fail(e)}function F({value:e}){""!==e?G.inputValue=e:G.showErr=!1}return l((()=>$.value),(e=>{var t;(t=e)&&(G.title=O(t.title)?t.title:"",G.showCancelButton=!!O(t.showCancelButton)&&t.showCancelButton,G.show=t.show,G.closeOnClickModal=t.closeOnClickModal,G.confirmButtonText=t.confirmButtonText,G.cancelButtonText=t.cancelButtonText,G.msg=t.msg,G.type=t.type,G.inputType=t.inputType,G.inputSize=t.inputSize,G.inputValue=t.inputValue,G.inputPlaceholder=t.inputPlaceholder,G.inputPattern=t.inputPattern,G.inputValidate=t.inputValidate,G.success=t.success,G.fail=t.fail,G.beforeConfirm=t.beforeConfirm,G.inputError=t.inputError,G.showErr=t.showErr,G.zIndex=t.zIndex,G.lazyRender=t.lazyRender,G.confirmButtonProps=t.confirmButtonProps,G.cancelButtonProps=t.cancelButtonProps)}),{deep:!0,immediate:!0}),l((()=>G.show),(e=>{!1===!!e&&(G.showErr=!1)}),{deep:!0,immediate:!0}),(e,t)=>{const o=b;return r(),u(o,null,{default:i((()=>[c(P,{transition:"zoom-in",modelValue:G.show,"onUpdate:modelValue":t[3]||(t[3]=e=>G.show=e),"close-on-click-modal":G.closeOnClickModal,"lazy-render":G.lazyRender,"custom-class":"wd-message-box",onClickModal:t[4]||(t[4]=e=>A("modal")),"z-index":G.zIndex,duration:200,"root-portal":e.rootPortal},{default:i((()=>[c(o,{class:p(V.value)},{default:i((()=>[c(o,{class:p(k.value)},{default:i((()=>[G.title?(r(),u(o,{key:0,class:"wd-message-box__title"},{default:i((()=>[d(m(G.title),1)])),_:1})):f("",!0),c(o,{class:"wd-message-box__content"},{default:i((()=>["prompt"===G.type?(r(),_(h,{key:0},[c(B,{modelValue:G.inputValue,"onUpdate:modelValue":t[0]||(t[0]=e=>G.inputValue=e),type:G.inputType,size:G.inputSize,placeholder:G.inputPlaceholder,onInput:F},null,8,["modelValue","type","size","placeholder"]),G.showErr?(r(),u(o,{key:0,class:"wd-message-box__input-error"},{default:i((()=>[d(m(G.inputError||w(g)("inputNoValidate")),1)])),_:1})):f("",!0)],64)):f("",!0),y(e.$slots,"default",{},(()=>[d(m(G.msg),1)]),!0)])),_:3})])),_:3},8,["class"]),c(o,{class:p("wd-message-box__actions "+(G.showCancelButton?"wd-message-box__flex":"wd-message-box__block"))},{default:i((()=>[G.showCancelButton?(r(),u(E,x({key:0},j.value,{onClick:t[1]||(t[1]=e=>A("cancel"))}),{default:i((()=>[d(m(G.cancelButtonText||w(g)("cancel")),1)])),_:1},16)):f("",!0),c(E,x(R.value,{onClick:t[2]||(t[2]=e=>A("confirm"))}),{default:i((()=>[d(m(G.confirmButtonText||w(g)("confirm")),1)])),_:1},16)])),_:1},8,["class"])])),_:3},8,["class"])])),_:3},8,["modelValue","close-on-click-modal","lazy-render","z-index","root-portal"])])),_:3})}}}),[["__scopeId","data-v-5484ff85"]]);export{R as _,G as u};
